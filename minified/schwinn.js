javascript:(function()%7B%2F%2F%20grab%20the%20ride%20ID%20from%20the%20URL%20in%20the%20browservar%20rideID%20%3D%20window.location.pathname.split(%22%2F%22)%3BrideID%20%3D%20rideID%5BrideID.length%20-%201%5D%3B%2F%2F%20peloton%20doesn't%20respond%20with%20target%20metrics%20if%20credentials%20are%20not%20includedfetch(%22https%3A%2F%2Fapi.onepeloton.com%2Fapi%2Fride%2F%22%20%2B%20rideID%20%2B%20%22%2Fdetails%3Fstream_source%3Dmultichannel%22%2C%20%7B%22headers%22%3A%20%7B%22accept%22%3A%20%22application%2Fjson%2C%20text%2Fplain%2C%20*%2F*%22%2C%22accept-language%22%3A%20%22en-US%22%2C%22peloton-platform%22%3A%20%22web%22%2C%22sec-fetch-dest%22%3A%20%22empty%22%2C%22sec-fetch-mode%22%3A%20%22cors%22%2C%22sec-fetch-site%22%3A%20%22same-site%22%2C%22x-requested-with%22%3A%20%22XmlHttpRequest%22%7D%2C%22referrer%22%3A%20%22https%3A%2F%2Fmembers.onepeloton.com%2Fclasses%2Fplayer%2F%22%20%2B%20rideID%2C%22referrerPolicy%22%3A%20%22no-referrer-when-downgrade%22%2C%22body%22%3A%20null%2C%22method%22%3A%20%22GET%22%2C%22mode%22%3A%20%22cors%22%2C%22credentials%22%3A%20%22include%22%7D).then(function%20(response)%20%7Breturn%20response.json()%7D).then(function%20(ride)%20%7B%2F%2F%20schwinn%20mapping%2C%20values%20in%20order%20corresponding%20to%20pelotonvar%20schwinnResistance%20%3D%20%5B1%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%202%2C%203%2C%204%2C%205%2C%206%2C%207%2C%208%2C%209%2C%2011%2C%2012%2C%2014%2C%2015%2C%2017%2C%2019%2C%2020%2C%2022%2C%2023%2C%2025%2C%2027%2C%2029%2C%2031%2C%2033%2C%2035%2C%2038%2C%2041%2C%2043%2C%2046%2C%2049%2C%2051%2C%2052%2C%2053%2C%2054%2C%2055%2C%2056%2C%2057%2C%2058%2C%2059%2C%2060%2C%2061%2C%2062%2C%2063%2C%2064%2C%2065%2C%2066%2C%2067%2C%2068%2C%2069%2C%2070%2C%2071%2C%2072%2C%2073%2C%2074%2C%2075%2C%2076%2C%2077%2C%2078%2C%2079%2C%2080%2C%2081%2C%2082%2C%2083%2C%2084%2C%2085%2C%2086%2C%2087%2C%2088%2C%2089%2C%2090%2C%2091%2C%2092%2C%2093%2C%2094%2C%2095%2C%2096%2C%2097%2C%2098%2C%2099%2C%20100%5D%3Bvar%20classDuration%20%3D%20Number(ride.ride.duration)%3Bvar%20cadResistDiv%20%3D%20document.createElement('div')%3BcadResistDiv.id%20%3D%20'cadresist'%3BcadResistDiv.style%20%3D%20'color%3Awhite%3B%20position%3Aabsolute%3B%20top%3A%205%25%3B%20left%3A36%25%3B%20margin-top%3A%2035px'%3BcadResistDiv.innerHTML%20%3D%20'%3Cdiv%20id%3D%22cadresisttxt%22%20style%3D%22width%3A100%25%3Bcolor%3Awhite%3Btext-align%3Acenter%3B%22%3Emetrics%20start%20during%20warmup%3C%2Fdiv%3E%3Cdiv%20style%3D%22margin-top%3A10px%3Bwidth%3A100%25%3B%20height%3A2px%3B%20background-color%3A%23555555%22%3E%3Cdiv%20id%3D%22cadresistprogress%22%20style%3D%22width%3A0%25%3Btransition%3A990ms%20linear%3Bheight%3A2px%3Bbackground-color%3Awhite%22%3E%3C%2Fdiv%3E%3C%2Fdiv%3E'%3Bdocument.querySelector(%22div%5Bclass%3D'jw-wrapper%20jw-reset'%5D%22).after(cadResistDiv)%3Bvar%20cadResisTextDiv%20%3D%20document.getElementById('cadresisttxt')%3Bvar%20cadResisProgressDiv%20%3D%20document.getElementById('cadresistprogress')%3B%2F%2Fdoes%20the%20class%20have%20target%20metrics%3Fif%20(ride.target_metrics_data.length%20)%20%7BcadResistDiv.innerHTML%20%3D%20%22Class%20does%20not%20have%20target%20metrics.%22%3BsetTimeout(function%20()%20%7BcadResistDiv.innerHTML%20%3D%20%22%22%3B%7D%2C%205000)%3Breturn%3B%7D%2F%2F%20combinue%20consecutive%20cues%20that%20are%20the%20same%2F%2F%20%20%20some%20classes%20have%20lots%20of%20consecutive%20segments%20of%20only%20a%20couple%20seconds%2C%20but%20all%20with%20the%20same%20cadence%2Fresistancevar%20rideCue%20%3D%20%5B%5D%3B%2F%2Fvar%20cue%20%3D%20ride.instructor_cues%5B0%5D%3Bvar%20cue%20%3D%20ride.target_metrics_data.target_metrics%5B0%5D%3Bfor%20(var%20i%20%3D%201%3B%20i%20%3C%20ride.target_metrics_data.target_metrics.length%3B%20i%2B%2B)%20%7Bvar%20newCue%20%3D%20ride.target_metrics_data.target_metrics%5Bi%5D%3Bif%20(cue.metrics%5B0%5D.upper%20%3D%3D%20newCue.metrics%5B0%5D.upper%20%26%26cue.metrics%5B0%5D.lower%20%3D%3D%20newCue.metrics%5B0%5D.lower%20%26%26cue.metrics%5B1%5D.upper%20%3D%3D%20newCue.metrics%5B1%5D.upper%20%26%26cue.metrics%5B1%5D.lower%20%3D%3D%20newCue.metrics%5B1%5D.lower)%20%7Bcue.offsets.end%20%3D%20newCue.offsets.end%3B%7D%20else%20%7BrideCue.push(cue)%3Bcue%20%3D%20newCue%3B%7D%7DrideCue.push(newCue)%3Bride.instructor_cues%20%3D%20rideCue%3B%20%2F%2Foverwrite%20original%20cue%20data%2F%2F%20set%20an%20observer%20on%20the%20timer%2C%20triggers%20running%20the%20code%20when%20it%20changes%2F%2Fvar%20mPar%20%3D%20document.querySelector(%22div%5Bdata-test-id%3D'video-timer'%5D%22)%2Cvar%20mPar%20%3D%20document.querySelector(%22div%5Bclass%3D'player-overlay-wrapper'%5D%22)%2Coptions%20%3D%20%7Battributes%3A%20true%2CchildList%3A%20true%2Csubtree%3A%20true%2CcharacterData%3A%20true%7D%2Cobserver%20%3D%20new%20MutationObserver(mCallback)%3Bfunction%20mCallback(mutations)%20%7B%2F%2F%20if%20the%20course%20has%20not%20started%20(1%20minute%20warm-up)%2C%20exitvar%20timestamp%20%3D%20document.querySelector(%22p%5Bdata-test-id%3D'time-to-complete'%5D%22)%3Bif%20(!timestamp)%20return%3B%2F%2F%20split%20the%20mm%3Ass%20timestamp%20from%20the%20peloton%20GUItimestamp%20%3D%20timestamp.innerHTML.split(%22%3A%22)%3Bif%20(timestamp.length%20!%3D%202)%20return%3B%2F%2F%20convert%20mm%3Ass%20timestamp%20to%20cue%20timecode%20in%20the%20API%20(seconds%20elapsed)var%20timecode%20%3D%20(classDuration%20-%20(Number(timestamp%5B0%5D)%20*%2060%20%2B%20Number(timestamp%5B1%5D)))%20%2B%20Number(ride.ride.pedaling_start_offset)%3Bfor%20(var%20i%20%3D%200%3B%20i%20%3C%20ride.target_metrics_data.target_metrics.length%3B%20i%2B%2B)%20%7Bvar%20cue%20%3D%20ride.target_metrics_data.target_metrics%5Bi%5D%3Bif%20(timecode%20%3E%3D%20Number(cue.offsets.start)%20%26%26%20timecode%20%3C%3D%20Number(cue.offsets.end))%20%7Bif(cue.segment_type%20%3D%3D%20'cycling')%20%7Bvar%20cadence%3Bvar%20resistance%3Bfor(var%20x%20%3D%200%3B%20x%3Ccue.metrics.length%3B%20x%2B%2B)%20%7Bswitch(cue.metrics%5Bx%5D.name)%20%7Bcase%20'resistance'%3Aresistance%20%3D%20cue.metrics%5Bx%5D%3Bbreak%3Bcase%20'cadence'%3Acadence%20%3D%20cue.metrics%5Bx%5D%3Bbreak%3B%7D%7DcadResisTextDiv.innerHTML%20%3D%20%22cadence%3A%20%22%20%2B%20cadence.lower%20%2B%20%22%20-%20%22%20%2B%20cadence.upper%20%2B%20%22%20%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%20resistance%3A%20%22%20%2B%20schwinnResistance%5Bresistance.lower%5D%20%2B%20%22%20-%20%22%20%2B%20schwinnResistance%5Bresistance.upper%5D%20%2B%20%22%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%20(%22%20%2B%20resistance.lower%20%2B%20%22%20-%20%22%20%2B%20resistance.upper%20%2B%20%22)%22%3B%7Dif(cue.segment_type%20%3D%3D%20'running')%20%7Bvar%20speed%3Bvar%20incline%3Bfor(var%20x%20%3D%200%3B%20x%3Ccue.metrics.length%3B%20x%2B%2B)%20%7Bswitch(cue.metrics%5Bx%5D.name)%20%7Bcase%20'speed'%3Aspeed%20%3D%20cue.metrics%5Bx%5D%3Bbreak%3Bcase%20'incline'%3Aincline%20%3D%20cue.metrics%5Bx%5D%3Bbreak%3B%7D%7DcadResisTextDiv.innerHTML%20%3D%20%22speed%3A%20%22%20%2B%20speed.lower%20%2B%20%22%20-%20%22%20%2B%20speed.upper%20%2B%20%22%20%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%20incline%3A%20%22%20%2B%20incline.lower%20%2B%20%22%20-%20%22%20%2B%20incline.upper%3B%7Dif%20(timecode%20%3D%3D%20Number(cue.offsets.start))%20%7BcadResisProgressDiv.style.transition%20%3D%20%22none%22%3BcadResisProgressDiv.style.width%20%3D%20%220%25%22%3B%7D%20else%20%7BcadResisProgressDiv.style.transition%20%3D%20%22990ms%20linear%22%3BcadResisProgressDiv.style.width%20%3D%20Math.round((((timecode)%20-%20cue.offsets.start)%20%2F%20(cue.offsets.end%20-%20cue.offsets.start))%20*%20100)%20%2B%20%22%25%22%3B%7Dreturn%3B%7D%7D%7Dobserver.observe(mPar%2C%20options)%3B%7D)%7D)()
